!function(a){"use strict";var b={init:function(){b.componentOrder(),b.componentToggle(),b._radioButtonsInit(),b._toggleInit()},componentOrder:function(){a(".component-order").each(function(){var c=this,d=a(c).next(".component-order-input");a(c).sortable({axis:"y"}),a(c).disableSelection(),a(c).bind("sortstop",function(a){b.componentSort(a.target,d)}),a(".ui-sortable-handle",c).bind("click",function(a){a.preventDefault()}),a(".component-visibility",c).bind("click",function(){a(this).parent("li").toggleClass("disabled"),b.componentSort(c,d)})})},componentSort:function(b,c){var d=[];a(b).find("li").each(function(){d.push(a(this).hasClass("disabled")?"[disabled]"+a(this).attr("id"):a(this).attr("id"))}),d=d.join(","),c.attr("value",d).trigger("change")},componentToggle:function(){var b={header:"archetype_header_layout"};a.each(b,function(b,c){wp.customize(c,function(b){b.bind(function(b){a(".component-order").each(function(){var d=this,e=a(d).data();c===e.id&&(~e.value.indexOf(b)?a(d).parent("label").show():a(d).parent("label").hide())})})})})},_radioButtonsInit:function(){a.fn.buttonset&&a(".radio-buttons").each(function(){var b=this;a(b).buttonset(),a("label",b).on("keydown",function(c){13===c.which&&(c.preventDefault(),a(c.target).click(),a(b).buttonset("refresh"))})})},_toggleInit:function(){var a={"input[data-customize-setting-link=archetype_boxed]":"#customize-control-archetype_boxed_background_color","input[data-customize-setting-link=archetype_post_shadow_toggle]":"#customize-control-archetype_post_shadow_color","input[data-customize-setting-link=archetype_search_shadow_toggle]":"#customize-control-archetype_search_shadow_color","!input[data-customize-setting-link=archetype_button_2d]":"#customize-control-archetype_button_shadow_color, #customize-control-archetype_button_shadow_hover_color","input[data-customize-setting-link=archetype_upsell_display_toggle]":"#customize-control-archetype_upsell_display_limit, #customize-control-archetype_upsell_display_limit_text, #customize-control-archetype_upsell_display_columns, #customize-control-archetype_upsell_display_columns_text","input[data-customize-setting-link=archetype_related_products_toggle]":"#customize-control-archetype_related_products_limit, #customize-control-archetype_related_products_limit_text, #customize-control-archetype_related_products_columns, #customize-control-archetype_related_products_columns_text"};b._toggleEach(a)},_toggleEach:function(c){a.each(c,function(c,d){var e=!1;"!"===c.charAt(0)&&(c=c.substr(1),e=!0),b._toggle(c,d,e),a(document).on("click",c,function(){b._toggle(c,d,e)})})},_toggle:function(b,c,d){var e=a(b),f=a(c);e.prop("checked")?d?f.hide():f.show():d?f.show():f.hide()}};a(b.init)}(jQuery);