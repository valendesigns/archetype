!function(a){var b,c,d,e,f,g,h={init:function(){h._logoInit(),h._toggleInit(),a(document).on("click","input[name=customize-import-button]",h._import),a(document).on("click","input[name=customize-export-button]",h._export)},_cacheSelectors:function(){var h=a("iframe").contents();b=a("body",h),c=a(".site-logo-link",h),d=a(".site-logo",h),e=a(".svg-site-logo",h),f=a(".site-branding",h),g=d.attr("data-size",h)},_logoInit:function(){wp.customize("site_logo",function(a){a.bind(function(a){b||h._cacheSelectors(),a&&a.url?(d.hide(),f.hide(),a.sizes[g]||(g="full"),e.css({height:a.sizes[g].height,width:a.sizes[g].width}),"block"!==e.css("display")&&d.show()):f.show()})}),wp.customize("archetype_site_logo_svg",function(f){f.bind(function(f){if(b||h._cacheSelectors(),f){var g={action:"archetype-get-logo-url",wp_customize:"on",id:f,"customize-logo":Archetype_CustomizerConfig.customizerLogoNonce};a.post(Archetype_CustomizerConfig.ajaxURL,g,function(a){if(a.data&&a.data.message)alert(a.data.message),d.show();else if(a.success){var b=d.attr("width"),f=d.attr("height");d.hide(),e.css({display:"block","background-image":"url("+a.data+")","background-repeat":"no-repeat","background-size":"contain",width:b,height:f}),c.is(":hidden")&&alert(Archetype_Customizerl10n.missingLogo)}})}else d.show(),e.css({display:"none"})})})},_toggleInit:function(){var b={"input[data-customize-setting-link=archetype_boxed]":"#customize-control-archetype_boxed_background_color","input[data-customize-setting-link=archetype_post_shadow_toggle]":"#customize-control-archetype_post_shadow_color","input[data-customize-setting-link=archetype_search_shadow_toggle]":"#customize-control-archetype_search_shadow_color","input[data-customize-setting-link=archetype_related_products_toggle]":"#customize-control-archetype_related_products_limit, #customize-control-archetype_related_products_limit_text, #customize-control-archetype_related_products_columns, #customize-control-archetype_related_products_columns_text"};a.each(b,function(b,c){h._toggle(b,c),a(document).on("click",b,function(){h._toggle(b,c)})})},_toggle:function(b,c){var d=a(b),e=a(c);d.prop("checked")?e.show():e.hide()},_import:function(){var b=a(window),c=a("body"),d=a('<form class="customize-import-form" method="POST" enctype="multipart/form-data"></form>'),e=a(".customize-import-controls"),f=a("input[name=customize-import-file]"),g=a(".customize-import-uploading");""===f.val()?alert(Archetype_Customizerl10n.emptyImport):(b.off("beforeunload"),c.append(d),d.append(e),g.show(),d.submit())},_export:function(){return window.location.href=Archetype_CustomizerConfig.customizerURL+"?customize-export="+Archetype_CustomizerConfig.customizerExportNonce,!1}};a(h.init)}(jQuery);